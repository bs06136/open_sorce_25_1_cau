using System.Collections.Generic;
using System.Linq;

namespace CardGame
{
    public static class CardStoryLibrary
    {
        // 카드 이름을 키로 하는 스토리 딕셔너리
        private static readonly Dictionary<string, List<string>> CardStories = new Dictionary<string, List<string>>
        {
            ["바보"] = new List<string>
            {
                "왠지 모르게 산뜻한 기분이 든다.",
                "눈 앞에 강한 빛이 반짝였고 나는 잠시 눈이 멀어 아무 것도 볼 수가 없었다. 뭔가… 기억이…"
            },

            ["마법사"] = new List<string>
            {
                "바닥의 문양이 갑자기 빛나기 시작한다. 탑 전체에 크게 진동이 일고 본능적으로 몸이 떨린다. 어디선가 장엄한 목소리가 들린다. \"지금의 고통은 균형을 위한 계약이다.\" 그 말이 끝나자 모든 것은 다시 잦아들었다.",
                "불안함 속에서 잠시 멈춰섰다. 그러나 곧 이 순간이 지나가면, 나는 훨씬 더 강한 존재가 될 것이다."
            },

            ["여교황"] = new List<string>
            {
                "평화로운 풀벌레 소리가 들린다. 오늘 얻은 소소한 안정감에 잠시 기쁨을 느끼지만, 내일을 생각하니 그 기쁨이 오래가지 않을 것 같은 예감이 든다."
            },

            ["여제"] = new List<string>
            {
                "잠시 휴식을 취했다. 체력은 조금 회복했고, 죽음의 위협도 잠시 사라졌다. 확실히 더 나아진 건 맞지만, 이 정도로 만족할 수 있을지 모르겠다. 그저 작은 변화일 뿐",
                "물이 졸졸 흐르는 바위 틈에서 작은 약초를 발견했다. 이상하게 발걸음이 가볍다."
            },

            ["황제"] = new List<string>
            {
                "길을 걷다 황금색 바위를 발견했다. 무의식적으로 손을 뻗어 바위에 손끝이 닿는 순간, 내 안의 힘이 폭발하듯 부풀어 오른다. 그러나 동시에 등 뒤의 그림자도 조금 자라난 것 같다."
            },

            ["교황"] = new List<string>
            {
                "갑자기 주변의 모든 것이 내 손안에 있는 듯한 기분이 들었다. 하지만 동시에 발걸음이 무거워진다. 누군가 내 발목을 잡고 있는 것 같은 느낌이 든다."
            },

            ["연인"] = new List<string>
            {
                "회색 강아지 한 마리가 빛나는 나뭇가지를 물고 다가왔다. 머리를 쓰다듬고 나뭇가지를 받자 강아지가 나의 뒤를 따라온다.",
                "핏물로 이루어진 분수가 나타났다. 분수 안에 무언가가 있어 핏물에 손을 넣어 오래된 조각을 건져올렸다. 조각은 곧 내 손에서 살아 움직이기 시작했다."
            },

            ["전차"] = new List<string>
            {
                "벽에 새겨진 문양에 손을 얹자, 뜨거운 기운이 손끝에서 심장으로 퍼져갔다. 더 강하게 몸을 움직일 수 있을 것 같다.",
                "무너진 잔해 속에서 푸르게 빛나는 수정 조각을 쥐자, 근육이 움찔거리고 심장이 미친 듯이 뛰기 시작했다."
            },

            ["힘"] = new List<string>
            {
                "왠지 모르게 힘이 난다.",
                "어깨에 내려앉은 먼지를 털어내자, 살짝 가벼워진다. 아직은 할 수 있을 것 같다.",
                "가방 속 구겨진 쪽지를 발견했다. \"괜찮아, 잘하고 있어.\" 그 말 하나에 다시 숨을 쉰다.",
                "작은 우물을 발견했다. 한 모금 마시니 온 몸에 활력이 도는 듯한 기분이다.",
                "푸석한 빵을 입에 넣으니 생각보다 따뜻하고 맛있다."
            },

            ["은둔자"] = new List<string>
            {
                "건너편이 보이지 않는 강이 눈 앞에 나타났다. 뼛속까지 얼어붙는 차가움에 심장을 쥐어짜는 고통을 참고 어두운 강을 건넌다. 건너편에는 진정한 생명의 샘이 기다리고 있을 것이다."
            },

            ["운명의 수레바퀴"] = new List<string>
            {
                "갑자기 불어온 바람에 휩쓸려 한참을 떠밀리다 눈을 떠보니, 전혀 다른 방에 있었다.",
                "길을 가다 무심코 손에 쥔 작은 돌멩이가 번쩍 빛나며 길을 바꿔버렸다.",
                "지금까지 지나온 길이 아지랑이처럼 흔들리며 사라졌다."
            },

            ["정의"] = new List<string>
            {
                "갑자기 누군가 다가와 길을 막고는 소리쳤다. \"순리를 따르거라!\" 그리고 나즈막히 주문을 왼 뒤, 떠나갔다. 어딘가 찜찜한 느낌이 든다.",
                "큰 나무 밑 바위 위에 앉아 숨을 골랐다. 지금까지 달려온 자신을 돌아볼 시간이다."
            },

            ["매달린 남자"] = new List<string>
            {
                "누군가 남긴 듯한 식량이 있었다. 먹고 나니 조금은 힘이 난다. 그 순간 어딘가 문이 닫히는 소리가 들렸다."
            },

            ["죽음"] = new List<string>
            {
                "어둠 속에서 튀어나온 칼날에 가슴을 꿰뚫렸다. 힘없이 무너진 몸 위로 침묵이 내려앉았다.",
                "벽을 타던 도중 갑작스레 손잡이가 부서졌다. 그대로 허공에 매달린 채 추락하고 말았다.",
                "피비린내 나는 복도에서 발을 들이자 함정이 발동했다. 어둠에서 나타난 창 끝이 순식간에 몸을 꿰뚫었다.",
                "잘못 건드린 문양이 터지며 온몸이 불타올랐다. 뜨거운 비명을 끝으로 모든 것이 타버렸다.",
                "문을 열자마자 터진 화염에 온몸이 삼켜졌다.",
                "머리 위 천장이 무너졌다. 피할 새도 없이 깔렸다.",
                "갑자기 갑옷을 두른 괴수가 나타내 배를 꿰뚫었다. 외마디 비명도 지르지 못한 채 죽고 말았다."
            },

            ["절제"] = new List<string>
            {
                "날카로운 바람에 손등이 베였다. 그 순간 정신이 또렷해졌고, 복잡했던 길이 선명해졌다.",
                "천장에서 떨어진 물방울이 이마에 닿았다. 그 차가움이 정신을 차리게 했다.",
                "갑작스럽게 어둠 속에서 모든 소리가 멈췄다. 숨을 돌릴 틈, 하지만 오래가지 못할 것이라는게 본능적으로 느껴진다."
            },

            ["악마"] = new List<string>
            {
                "오래된 제단에 손을 얹자 고대의 힘이 몸 안으로 흘러들었다. 동시에 심장은 무언가에 짓눌린 듯한 고통을 느꼈다.",
                "푸르게 빛나는 샘물을 마셨다. 목이 시원해지고 몸에 활력이 도는 듯하지만, 손끝이 점점 얼어붙기 시작한다."
            },

            ["탑"] = new List<string>
            {
                "한 쪽 구석에서 지름길을 찾은 것 같다. 올라가보자."
            },

            ["별"] = new List<string>
            {
                "무너진 벽 틈 사이에서 반들반들한 수정 조각을 발견했다. 손에 쥐자 따뜻한 기운이 전해진다.",
                "금이 간 거울 앞에 서자, 이마에 부드러운 온기가 닿았다. 잠시, 마음이 편안해졌다.",
                "금 간 벽에서 새어나온 별빛을 받아냈다. 별 하나가 내 가슴속에서 뛰기 시작했다."
            },

            ["달"] = new List<string>
            {
                "무너진 기둥 아래에서 반짝이는 보석을 꺼냈다. 동시에 뒷목이 얼어붙는 기분이 들었다.",
                "벽에 새겨진 기호를 손으로 더듬자, 기운이 빠지는 대신 마음은 안정되었다.",
                "낡은 책장에서 고대의 문장을 발견했다. 무언가를 이해한 듯한 기분과 함께, 코끝에서 피가 흘러내렸다."
            },

            ["태양"] = new List<string>
            {
                "뜨거운 빛이 몸을 감싸고, 새로운 힘이 생겨난다. 그러나 그 열기에 고통이 뒤따른다.",
                "기괴한 상자 안엔 맑은 물약과 찢어진 편지가 함께 들어 있었다. 마시고 나니 몸은 가벼워졌지만, 가슴이 무겁다.",
                "방 안 가득 퍼진 향기로운 냄새에 이끌렸다. 정신이 조금 흐려졌지만, 몸은 한결 가벼워졌다."
            },

            ["심판"] = new List<string>
            {
                "먼지 낀 천 위에 누워 밤을 보내니 마음이 차분해졌다. 하지만 일어난 뒤엔 등이 조금 아파왔다. 어? 가방이 왜 열려있지?",
                "작은 무덤 앞 꽃혀있는 칼 하나를 발견하고는 뽑아 들었다. 그 반쯤 부서진 검에서 미약한 진동이 느껴지더니 한순간 빛이 났다."
            },

            ["세계"] = new List<string>
            {
                "기묘한 빛을 품은 수정을 발견했다. 손을 얹자, 다친 상처와 영혼이 회복되고, 내가 선택하지 않았던 또 다른 가능성들이 내게 다가와 힘이 되어주었다.",
                "황폐한 도서관에서 잊힌 주문서를 발견했다. 책장을 펼치는 순간, 나를 둘러싼 세계가, 탑이 내 목소리에 반응하기 시작했다.",
                "꺼져가던 횃불들이 동시에 되살아났다. 서로 멀리 떨어진 불씨들이 하나의 숨결로 이어졌다. 이 공간 전체가 따뜻해져 간다."
            },

            ["부활"] = new List<string>
            {
                "자그마한 틈 사이로 쏟아지는 햇살이 눈부시다. 뭔가 새로운 길이 열린 것 같은 느낌이다.",
                "빛을 잃은 정원의 마지막 꽃을 발견했다. 물통을 열어 조금 물을 주자, 주변의 생명이 폭발하듯 되살아났다."
            },

            ["생명"] = new List<string>
            {
                "한참을 걷다 발밑에 뭔가 밟혔다. 오래된 파편이었지만, 안에는 눈 부시게 반짝이는 조각이 담겨 있다. 챙겨가도록 하자."
            },

            ["악동"] = new List<string>
            {
                "구석진 곳에서 작은 상자를 하나 발견했다. 그 안에 무엇이 있을지 모르지만, 지금 이 순간의 호기심은 나를 멈추게 하지 않는다.",
                "탑을 오르며 잠깐의 여유를 부린다. 악동처럼 약간의 장난을 쳤다. 그것이 나중에 내게 어떤 결과를 가져올지는 모르겠지만, 지금은 그저 웃음이 나온다.",
                "그저 작은 장난일 뿐이었다. 한 순간의 기분을 따라가며 손을 놀렸다. 하지만 탑의 모든 것이 나를 시험하는 것처럼, 이 장난이 어떤 꼬리에 꼬리를 물고 나를 잡아당길지도 모른다."
            },

            ["거울"] = new List<string>
            {
                "다음 층으로 가는 커다란 문을 밀었을 때, 이미 이 무게를 버텨본 기억이 되살아났다.",
                "왜 있는지 모를 폐허들이 모여있는 마을의 골목을 돌자마자, 익숙한 냄새가 코를 찔렀다. 분명히 지나쳤던 곳인데.",
                "달라진 건 없는 풍경인데, 발걸음 하나하나가 반복되는 듯 무거웠다."
            },

            ["연기"] = new List<string>
            {
                "이번 층은 아무일 없이 그저 고요하기만 하다.",
                "작은 나무 상자를 발견해 열어보자, 안엔 텅 빈 종이와 거미 한 마리뿐이었다."
            },

            ["일식"] = new List<string>
            {
                "허기진 상태로 주변에 있던 낡은 진열장을 열자, 이상하게 신선한 빵 한 조각이 있었다. 먹고 나니 기운은 났지만, 어디선가 뭔가 날 지켜보는 기분이 들었다."
            },

            ["암거래"] = new List<string>
            {
                "길을 걷다 발아래 진동이 느껴졌다. 발밑이 무너지기 직전, 반사적으로 앞에 있던 괴상한 나무를 움켜쥐었다.",
                "어둑한 공간을 걷고 있던 중, 어디선가 기분 나쁜 종소리가 울렸다. 종소리를 쫓아 발길을 돌리니 길을 찾을 수 있었다."
            },

            ["불씨"] = new List<string>
            {
                "무너져있는 고대 유적지를 뒤지던 중 날카로운 무언가에 손을 베였다. 어딘가 수상한 느낌의 장식품이었다. 그러나 왠지 도움이 되는 순간이 있을 거 같아 챙기기로 한다.",
                "공중에 떠다니던 희미한 불꽃을 덥석 움켜쥐었다. 손바닥은 그을렸지만, 그 불꽃은 앞으로 어둠을 헤치는 등불이 될 것이다."
            },

            ["저주받은 책"] = new List<string>
            {
                "책상에 놓여있던 낡은 책의 책장이 저절로 넘겨진다. 그 순간, 음산한 기운이 나를 스친다.",
                "그림자가 다가왔다. 아무것도 없었지만, 그 찝찝함은 가시지 않는다."
            },

            ["예언자"] = new List<string>
            {
                "날카로운 바람이 스쳐 지나갔다. 피부는 찢겼지만, 함께 날아온 주문 조각 하나가 손에 남았다."
            },

            ["종말의 경전"] = new List<string>
            {
                "잠시 멈춰 숨을 고르던 중 비밀 문을 발견했다. 열자마자 짙은 안개가 밀려들었다."
            },

            ["강탈자"] = new List<string>
            {
                "돌부리에 걸려 넘어졌다. 무릎이 조금 까진 것 같다.",
                "오래된 계단을 오르다 삐끗했다. 무릎이 욱신거린다."
            },

            ["대천사"] = new List<string>
            {
                "무너진 벽 틈 사이에서 반들반들한 수정 조각을 발견했다. 손에 쥐자 따뜻한 기운이 전해진다.",
                "무너진 회랑 틈에서 고대의 성배를 발견했다. 한 모금 마시자 몸에 깃든 상처와 피로가 눈처럼 녹았다."
            },

            ["영혼의 초"] = new List<string>
            {
                "기괴한 상자 하나를 발견했다. 안엔 맑은 물약과 찢어진 편지가 함께 들어 있었다. 마시고 나니 몸은 가벼워졌지만, 가슴이 무겁다."
            },

            ["그림자의 균열"] = new List<string>
            {
                "찬 바람이 갑자기 닿았다. 체온이 뚝 떨어지는 느낌이다.",
                "구석에 있던 고양이 눈을 닮은 조각상을 만지자, 손끝이 얼얼해졌다.",
                "실수로 밟은 조약돌에서 독을 새어나왔다. 온몸이 저려온다."
            },

            ["영혼 결혼식"] = new List<string>
            {
                "길을 따라 걷다 갑자기 외눈박이 조각상이 말을 걸어왔다. 처음보는 과일 몇 개를 건네며 위험한 순간에 본인이 도와줄 수 있으니 함께 다니자고 한다."
            },

            ["피의 서약"] = new List<string>
            {
                "탑 깊숙이 숨겨진 방에서 고대의 계약서를 손에 넣었다. 손가락을 깨물어 이름을 쓰자, 맹약의 힘이 나를 보호하기 시작했다."
            },

            ["운명의 유희"] = new List<string>
            {
                "무너진 기둥 사이 벽을 넘어가다 숨겨진 문을 발견했다. 물을 한 모금 마시고 문을 열어 미지의 공간을 향해 들어간다."
            },

            ["꿈"] = new List<string>
            {
                "길을 잘못 들어 몬스터 무리와 마주쳤다. 겨우 도망쳤지만, 그 틈에 떨어진 장비 하나를 챙겼다.",
                "날개 달린 수호상이 공격해왔다. 치열한 싸움 끝에 간신히 쓰러뜨리고, 그 아래 감춰진 고서를 손에 넣었다.",
                "좁은 통로를 기어가다 작은 상자를 발견했다. 안엔 쓴 약초가 있었고, 먹자 눈이 또렷해졌지만 입안이 쓰다."
            }
        };

        /// <summary>
        /// 카드 이름으로 랜덤 스토리 가져오기
        /// </summary>
        /// <param name="cardName">카드 이름</param>
        /// <returns>해당 카드의 랜덤 스토리 텍스트</returns>
        public static string GetRandomStory(string cardName)
        {
            if (CardStories.ContainsKey(cardName) && CardStories[cardName].Count > 0)
            {
                var stories = CardStories[cardName];
                int randomIndex = UnityEngine.Random.Range(0, stories.Count);
                return stories[randomIndex];
            }

            return $"[{cardName}]의 이야기를 찾을 수 없습니다.";
        }

        /// <summary>
        /// 카드 이름으로 모든 스토리 가져오기
        /// </summary>
        /// <param name="cardName">카드 이름</param>
        /// <returns>해당 카드의 모든 스토리 리스트</returns>
        public static List<string> GetAllStories(string cardName)
        {
            if (CardStories.ContainsKey(cardName))
            {
                return new List<string>(CardStories[cardName]);
            }

            return new List<string> { $"[{cardName}]의 이야기를 찾을 수 없습니다." };
        }

        /// <summary>
        /// 특정 인덱스의 스토리 가져오기
        /// </summary>
        /// <param name="cardName">카드 이름</param>
        /// <param name="storyIndex">스토리 인덱스</param>
        /// <returns>해당 인덱스의 스토리 텍스트</returns>
        public static string GetStoryByIndex(string cardName, int storyIndex)
        {
            if (CardStories.ContainsKey(cardName) && CardStories[cardName].Count > storyIndex && storyIndex >= 0)
            {
                return CardStories[cardName][storyIndex];
            }

            return $"[{cardName}]의 {storyIndex}번째 이야기를 찾을 수 없습니다.";
        }

        /// <summary>
        /// 카드에 스토리가 있는지 확인
        /// </summary>
        /// <param name="cardName">카드 이름</param>
        /// <returns>스토리 존재 여부</returns>
        public static bool HasStory(string cardName)
        {
            return CardStories.ContainsKey(cardName) && CardStories[cardName].Count > 0;
        }

        /// <summary>
        /// 카드의 스토리 개수 반환
        /// </summary>
        /// <param name="cardName">카드 이름</param>
        /// <returns>스토리 개수</returns>
        public static int GetStoryCount(string cardName)
        {
            if (CardStories.ContainsKey(cardName))
            {
                return CardStories[cardName].Count;
            }
            return 0;
        }

        /// <summary>
        /// 모든 카드 이름 목록 반환
        /// </summary>
        /// <returns>스토리가 있는 모든 카드 이름 리스트</returns>
        public static List<string> GetAllCardNames()
        {
            return CardStories.Keys.ToList();
        }
    }
}